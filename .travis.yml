language: python
# it would really be nice to be able to change the path, but in travis i cant figure out how to do it
env:
- CONDA_HOME=/opt/conda
before_install:
- sudo add-apt-repository -y ppa:freecad-maintainers/freecad-stable
- sudo apt-get update -qq
install:
- sudo apt-get install 
- sudo apt-get install -y wget bzip2 freecad freecad-doc
- sudo wget https://repo.continuum.io/miniconda/Miniconda2-latest-Linux-x86_64.sh
- sudo bash Miniconda2-latest-Linux-x86_64.sh -b -p $CONDA_HOME
- sudo $CONDA_HOME/bin/conda install -y -c pythonocc -c dlr-sc pythonocc-core==0.17.1 python=2
- sudo $CONDA_HOME/bin/pip install -r requirements-dev.txt
- sudo $CONDA_HOME/bin/python ./setup.py install
script:
# annoying! 
# since travis cant set the path, runtests.sh doesnt work, because we'd have to put CONDA_HOME
# in there-- but then it doesnt work locally
# this is a workaround till i can fix that.
- CQ_BACKEND=pythonOCC && $CONDA_HOME/bin/py.test -s --cov
- CQ_BACKEND=FreeCAD && $CONDA_HOME/bin/py.test -s --cov
after_success:
- coveralls
#- travis-sphinx deploy
branches:
  except:
  - pythonocc
